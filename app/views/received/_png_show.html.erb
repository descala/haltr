<div id="invoice_img" class="container1">
<div class="container2">
<%= form_tag({}) do -%>
  <%= hidden_field_tag 'back_url', url_for(params), :id => nil %>
  <%= hidden_field_tag 'id', @invoice.invoice_img.id, :id => nil %>

  <div class="colu2">
    <%= render partial: 'metadata' %>
  </div>

  <div class="colu1" style="width: <%=@invoice.invoice_img.width%>px; background-image: url('<%=project_invoice_img_path(@invoice.invoice_img, project_id: @project)%>')">
    <% @invoice.invoice_img.tokens && @invoice.invoice_img.useful_tokens.each do |number,attributes| %>
      <div class="rectangle-txt-edit hascontextmenu" style="left:<%=attributes[:x0]%>px; top:<%=attributes[:y0]%>px; width:<%=attributes[:x1].to_i-attributes[:x0].to_i%>px; height:<%=attributes[:y1].to_i-attributes[:y0].to_i%>px; font-size: <%=font_size(attributes)%>px;">
        <%= check_box_tag("token_ids[]", number, false, :id => nil) %>
        <span style="line-height: <%=font_size(attributes)%>px;"><%=h attributes[:text]%></span>
      </div>
    <% end %>
    <% @invoice.invoice_img.tags && @invoice.invoice_img.tags.each do |tag,number| %>
      <% attributes = @invoice.invoice_img.tokens[number] -%>
      <div id="<%=number%>" class="rectangle-txt" data-text="<%=h attributes[:text]%>" style="left:<%=attributes[:x0]%>px; top:<%=attributes[:y0]%>px; width:<%=attributes[:x1].to_i-attributes[:x0].to_i%>px; height:<%=attributes[:y1].to_i-attributes[:y0].to_i%>px;" data-tag="<%=tag.to_s%>"></div>
    <% end %>
    <div style="height: <%=@invoice.invoice_img.height%>px;">
    </div>
  </div>

<% end %>
</div>
</div>

<%= invoice_imgs_context_menu invoice_imgs_context_menu_path %>
